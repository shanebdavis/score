import &StandardImport

class Game extends IndexedDbPipeline
  dbName: "ArtSuiteScoreApp"
  @indexes
    gameByGameTypeId: :gameTypeId/createdAt

  @addDatabaseFilters
    gameType: "required link include"

  @query
    allGames:
      query: (request) ->
        request.subrequest :game :getAll
        .then (games) -> games.sort (a, b) -> b.updatedAt - a.updatedAt

      dataToKeyString: -> "all"
